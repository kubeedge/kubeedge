apiVersion: v1
kind: Pod
metadata:
  name: proxy-server
  namespace: default
spec:
  hostNetwork: true
  containers:
  - name: proxy-server
    image: liufen90/proxy-server-amd64:v1.1
    imagePullPolicy: IfNotPresent
    command: [ "/proxy-server"]
    args: [
      "--cluster-ca-cert=/root/ca/rootCA.crt",
      "--cluster-cert=/root/certs/proxy-server.crt",
      "--cluster-key=/root/certs/proxy-server.key",
      "--mode=http-connect",
      "--proxy-strategies=destHost",
      "--server-ca-cert=/root/ca/rootCA.crt",
      "--server-cert=/root/certs/proxy.crt",
      "--server-key=/root/certs/proxy.key",
      ]
    ports:
    - name: serverport
      containerPort: 8090
      hostPort: 8090
    - name: agentport
      containerPort: 8091
      hostPort: 8091
    - name: healthport
      containerPort: 8092
      hostPort: 8092
    - name: adminport
      containerPort: 8095
      hostPort: 8095
    volumeMounts:
    - mountPath: /root/certs   
      name: certs
    - mountPath: /root/ca
      name: ca
  volumes:
  - name: certs
    hostPath:
      path: /etc/kubeedge/certs
  - name: ca
    hostPath:
      path: /etc/kubeedge/ca