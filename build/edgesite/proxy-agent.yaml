apiVersion: v1
kind: Pod
metadata:
  name: proxy-agent
  namespace: default
spec:
  hostNetwork: true
  containers:
  - name: proxy-agent
    image: liufen90/proxy-agent-amd64:v1.0
    imagePullPolicy: IfNotPresent
    command: [ "/proxy-agent"]
    args: [
      "--ca-cert=/root/certs/agent/issued/ca.crt",
      "--agent-cert=/root/certs/agent/issued/proxy-agent.crt",
      "--agent-key=/root/certs/agent/private/proxy-agent.key",
      "--proxy-server-host=${PROXY_SERVER_IP}",
      "--agent-identifiers=host=${KUBE_APISERVER_IP}",
      ]
    volumeMounts:
    # 容器内路径
    - mountPath: /root/certs   
      name: certs
  volumes:
  - name: certs
    hostPath:
      path: /root/certs
